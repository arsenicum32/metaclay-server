!function(){$(document).ready(function(){function t(t,a){var r=a.right&&1==a.right?-1:1;if(b==t){z=!1;var e=s.append("line").attr({x1:x/2-r*(Math.cos(l)*f*u*(a.ofs||1)),y1:y/2+Math.sin(l)*f*u*(a.ofs||1)+(a.ypl||0),x2:x/2-r*(Math.cos(l)*f*u*a.rd),y2:y/2+Math.sin(l)*f*u*a.rd+(a.ypl||0),"stroke-width":2,stroke:"#333"}),o=s.append("line").attr({x1:x/2-r*(Math.cos(l)*f*u*a.rd),y1:y/2+Math.sin(l)*f*u*a.rd+(a.ypl||0),x2:x/2-r*(Math.cos(l)*f*u*a.rd)+(a.xp||0),y2:y/2+Math.sin(l)*f*u*a.rd+(a.yp||0)+(a.ypl||0),"stroke-width":2,stroke:"#333"}),n=s.append("circle").attr({cx:x/2-r*(Math.cos(l)*f*u*a.rd)+(a.xp||0)+(a.csx||0),cy:y/2+Math.sin(l)*f*u*a.rd+(a.yp||0)+(a.csy||0)+(a.ypl||0),r:v,"class":"door-circle"});if(a.startc){var d=s.append("circle").attr({cx:x/2-r*(Math.cos(l)*f*u*(a.ofs||1)),cy:y/2+Math.sin(l)*f*u*(a.ofs||1)+(a.ypl||0),r:v,"class":"door-circle"});1==a.right?p.push(d):i.push(d)}1==a.right?(p.push(e),p.push(o),p.push(n)):(i.push(e),i.push(o),i.push(n))}}function a(){j.transition().attr("opacity",0).attr("transform","translate(-"+x/4+", -"+y/4+") scale(1.5)").duration(1200)}function r(){g.transition().attr("transform","translate(-"+1.2*x+",0)").delay(50).duration(2500),M.transition().attr("transform","translate("+(-x/2+1.2*x)+",0)").delay(50).duration(2500);for(var t in p)if(p[t].attr("x")){var a=p[t].attr("x");p[t].transition().attr("x",a-x/2+1.2*x).delay(50).duration(2500)}else if(p[t].attr("x1")){var a=p[t].attr("x1"),r=p[t].attr("x2");p[t].transition().attr({x1:a-x/2+1.2*x,x2:r-x/2+1.2*x}).delay(50).duration(2500)}else if(p[t].attr("cx")){var a=p[t].attr("cx");p[t].transition().attr("cx",a-x/2+1.2*x).delay(50).duration(2500)}for(var t in i)if(i[t].attr("x")){var a=i[t].attr("x");i[t].transition().attr("x",a-1.2*x).delay(50).duration(2500).each("end",function(){s.remove()})}else if(i[t].attr("cx")){var a=i[t].attr("cx");i[t].transition().attr("cx",a-1.2*x).delay(50).duration(2500)}else if(i[t].attr("x1")){var a=i[t].attr("x1"),r=i[t].attr("x2");i[t].transition().attr({x1:a-1.2*x,x2:r-1.2*x}).delay(50).duration(2500)}}var s=d3.select("body").append("svg").style({position:"absolute",left:"0",top:"0",width:"100vw",height:"100vh","z-index":120}),e=s.append("defs"),o=e.append("radialGradient").attr({id:"grad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%"});o.append("stop").attr({offset:"0%",style:"stop-color:#fff;stop-opacity:1"}),o.append("stop").attr({offset:"100%",style:"stop-color:#ccc;stop-opacity:1"});var o=e.append("radialGradient").attr({id:"grad",x1:"0%",y1:"0%",x2:"0%",y2:"100%"});o.append("stop").attr({offset:"30%",style:"stop-color:#fff;stop-opacity:1"}),o.append("stop").attr({offset:"90%",style:"stop-color:#eee;stop-opacity:1"}),o.append("stop").attr({offset:"100%",style:"stop-color:#eee;stop-opacity:1"});var o=e.append("radialGradient").attr({id:"gradtile",x1:"0%",y1:"0%",x2:"0%",y2:"100%"});o.append("stop").attr({offset:"30%",style:"stop-color:#fff;stop-opacity:1"}),o.append("stop").attr({offset:"90%",style:"stop-color:#eee;stop-opacity:1"}),o.append("stop").attr({offset:"100%",style:"stop-color:#eaeaea;stop-opacity:1"});var i=[],p=[],n=s.append("rect").attr({width:x/2,height:y,fill:"url(#grad)","stroke-width":"2px",stroke:"#ccc",x:0,y:0}).style({height:"100vh"});i.push(n);for(var d=s.append("rect").attr({width:x/2,height:y,fill:"url(#grad)","stroke-width":"2px",stroke:"#ccc",x:x/2,y:0}),c=4,l=0;25>l;l++){var h=s.append("rect").attr({width:x/10,height:x/10,fill:"url(#gradtile)",x:x/2+l%5*(x/10+c)+c,y:(x/10+c)*~~(l/5)+(y-5*(x/10+c))/2});p.push(h)}for(var l=0;25>l;l++){var h=s.append("rect").attr({width:x/10,height:x/10,fill:"url(#gradtile)",x:x/2-x/10-l%5*(x/10+c)-c,y:(x/10+c)*~~(l/5)+(y-5*(x/10+c))/2});i.push(h)}var f=x/9,u=1.12,v=4,g=s.append("path").attr({d:"M "+x/2+","+(y/2-f)+" a "+f+","+f+" 0 1,0 0,"+2*f}).style({fill:"none",stroke:"#333","stroke-width":3}),M=s.append("path").attr({d:"M "+x/2+","+(y/2-f)+" a "+f+","+f+" 0 1,1 0,"+2*f}).style({fill:"none",stroke:"#333","stroke-width":3}),k=s.append("text").attr({x:x/12,y:y/8,"font-family":"sans-serif","font-size":"20px",fill:"#333"}).text("Metaclay"),w=s.append("text").attr({x:x/12,y:y/8+25,"font-family":"sans-serif","font-size":"20px",fill:"#333"}).text("Lab v0.1");i.push(k),i.push(w);var m=s.append("rect").attr({x:x/2+x/4,y:y/2+y/4,width:40,height:40,fill:"none","stroke-width":2,stroke:"#333"});p.push(m);for(var b=0,l=-1.55;1.45>l;l+=.2){b++;var z=!0;t(5,{rd:2,xp:-x/4,csx:-4}),t(5,{rd:2,xp:-x/20,csx:-4,ofs:1.9,ypl:15,startx:!0}),t(12,{rd:2.3,xp:-x/16,csx:-4}),t(12,{rd:2.3,xp:-x/30,csx:-4,ofs:1.8,ypl:20,startc:!0}),t(13,{rd:1.2,yp:x/16,csy:4}),t(6,{rd:1.3,xp:+x/4,csx:4,right:!0}),t(6,{rd:1.3,xp:+x/20,csx:4,ofs:1.1,ypl:-50,right:!0}),t(12,{rd:2.3,xp:+x/16,csx:4,right:!0});var G=s.append("line").attr({x1:x/2-Math.cos(l)*f,y1:y/2+Math.sin(l)*f,x2:x/2-Math.cos(l)*f*u,y2:y/2+Math.sin(l)*f*u,"stroke-width":2,stroke:"#333"});if(Math.random()>.6&&z&&b-1){var I=s.append("circle").attr({cx:x/2-Math.cos(l)*f*(u+.02),cy:y/2+Math.sin(l)*f*(u+.02),r:v,"class":"door-circle"});i.push(I)}i.push(G);var L=s.append("line").attr({x1:x/2+Math.cos(l)*f,y1:y/2+Math.sin(l)*f,x2:x/2+Math.cos(l)*f*u,y2:y/2+Math.sin(l)*f*u,"stroke-width":2,stroke:"#333"});if(Math.random()>.6&&z&&b-1){var I=s.append("circle").attr({cx:x/2+Math.cos(l)*f*(u+.02),cy:y/2+Math.sin(l)*f*(u+.02),r:v,"class":"door-circle"});p.push(I)}p.push(L)}p.push(d);var $=s.append("circle").attr({r:100,fill:"url(#grad2)","stroke-width":"5px",stroke:"#bbb",cx:x/2,cy:y/2});i.push($);var j=s.append("image").attr({width:180,height:180,fill:"#f00",opacity:1,"xlink:href":"/images/logog.png","transform-origin":"center",x:x/2-90,y:y/2-90}),q=0,A=setInterval(function(){360>q?(q+=3,j.attr("transform","rotate("+q+" "+x/2+" "+y/2+")")):(j.attr("transform",""),clearInterval(A),a(),r())},10)})}();